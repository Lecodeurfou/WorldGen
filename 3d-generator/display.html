<html>
	<head>
		<title>Word gen app</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/109/three.min.js"></script>
        <script src="https://threejs.org/examples/js/loaders/GLTFLoader.js"></script>
		<script src="scripts/app.js"></script>
		<script src="/socket.io/socket.io.js"></script>
        <script>
			var socket = io.connect('http://localhost:8080');

			socket.on('generateWorld', function(datas) {
	
				json = JSON.parse(datas);

				resetScene();
				addPlane();
				addObjectsFromJson(json);
				
				document.body.appendChild(renderer.domElement);

				setTimeout(function(){
					camera.updateProjectionMatrix();
					renderer.render(scene, camera);
					imgData = renderer.domElement.toDataURL();
					socket.emit("imgBase64", imgData );	
				}, 100);
				
			});
        </script>
	</body>
</html>